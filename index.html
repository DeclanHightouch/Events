<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Basic HTML Pages</title>
</head>
<body>
  <h1>Hello, world!</h1>
<textarea id="eventDataTextarea" rows="5" cols="40" placeholder="Event data will appear here..."></textarea>

  <p>This is a simple HTML page.</p>

  <button id="mpinButton">Set MPIN</button>

  <script type="text/javascript">
    !function(){
      var e=window.htevents=window.htevents||[];
      if(!e.initialize)
        if(e.invoked) window.console&&console.error&&console.error("Hightouch snippet included twice.");
        else {
          e.invoked=!0;
          e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];
          e.factory=function(t){
            return function(){
              var n=Array.prototype.slice.call(arguments);
              return n.unshift(t),e.push(n);
            }
          };
          for(var t=0;t<e.methods.length;t++){
            var n=e.methods[t];
            e[n]=e.factory(n);
          }
          e.load=function(t,n){
            var o=document.createElement("script");
            o.type="text/javascript";
            o.async=!0;
            o.src="https://cdn.hightouch-events.com/browser/release/v1-latest/events.min.js";
            var r=document.getElementsByTagName("script")[0];
            r.parentNode.insertBefore(o,r);
            e._loadOptions=n;
            e._writeKey=t;
          };
          e.SNIPPET_VERSION="0.0.1",
          e.load('529c3db9fe7cc37f1f581c5d828d6813951d9782c0034c7d643b1651881588c7',{apiHost:'eu-west-1.hightouch-events.com'}),
          e.page();
        }
    }();

    // Send MPINSetSuccesful event when button clicked
  document.getElementById('mpinButton').addEventListener('click', function() {
    const eventPayload = {
      userId: 'user123',
      code: 'successful',
      request_source: 'test'
    };

    // Send the event
    window.htevents.track('MPINSetSuccesful', eventPayload);
    htevents.page(category, name, [properties], [context], [callback]);

    // Show full event request in the textarea as formatted JSON
    const textarea = document.getElementById('eventDataTextarea');
    const fullRequest = {
      eventName: 'MPINSetSuccesful',
      data: eventPayload
    };
    textarea.value = JSON.stringify(fullRequest, null, 2);

    alert('MPINSetSuccesful event sent!');
  });
  </script>
</body>
</html>
